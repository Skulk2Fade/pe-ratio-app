{% extends "base.html" %}

{% block title %}{{ app_name }} - Portfolio{% endblock %}

{% block content %}
    <div class="container py-5">
        <h3 class="mb-4">Portfolio</h3>
        <form method="POST" class="mb-3">
            {{ add_form.hidden_tag() }}
            <div class="row g-2">
                <div class="col">
                    <input type="text" name="symbol" class="form-control" placeholder="Symbol" required>
                </div>
                <div class="col">
                    <input type="number" name="quantity" step="any" class="form-control" placeholder="Quantity" required>
                </div>
                <div class="col">
                    <input type="number" name="price_paid" step="any" class="form-control" placeholder="Price Paid" required>
                </div>
                <div class="col-auto">
                    <button class="btn btn-primary" type="submit">Add</button>
                </div>
            </div>
        </form>
        {% if items %}
        <div class="table-responsive">
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Quantity</th>
                        <th>Price Paid</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td>{{ item.symbol }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.price_paid }}</td>
                        <td>
                            <a href="{{ url_for('portfolio.delete_portfolio', item_id=item.id) }}" class="btn btn-sm btn-danger">Delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% if diversification %}
        <div class="alert alert-info">High concentration in {{ diversification }}</div>
        {% endif %}
        {% if correlations %}
        <h5>Asset Correlations</h5>
        {% endif %}
        {% if portfolio_volatility is not none %}
        <div class="alert alert-warning">Portfolio Volatility: {{ portfolio_volatility }}%</div>
        {% endif %}
        {% else %}
        <p>No portfolio items.</p>
        {% endif %}
        <a href="{{ url_for('main.index') }}" class="btn btn-secondary mt-3">Back</a>
    </div>
{% endblock %}
